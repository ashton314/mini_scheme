This is the command I run:

dprofpp -lv -O 100 tmon.out >> Log/Time_trial_log.txt

Mon Oct 29 17:35:51 MDT 2012

## Let this be the standard speed test

WITHOUT PROFILING {
   * (begin (time-trial 1000 (closure-tests)) (time-trial 1000
     (loop-tests)))
   [===========================================================================
     =========================]
   [===========================================================================
     =========================]
   ANALYZATION AND ONE EXECUTION: 0.0267210006713867
   TOTAL TIME ELAPSED:            27.9037609100342
   NET TIME:                      27.8770399093628
   AVERAGE ITERATION TIME:        0.0278770399093628
   [===========================================================================
     =========================]
   [===========================================================================
     =========================]
   ANALYZATION AND ONE EXECUTION: 0.0527968406677246
   TOTAL TIME ELAPSED:            54.3835010528564
   NET TIME:                      54.3307042121887
   AVERAGE ITERATION TIME:        0.0543307042121887
   
   ; UNDEF
   *
}

WITH PROFILING {
   * (begin (time-trial 1000 (closure-tests)) (time-trial 1000
     (loop-tests)))
   [===========================================================================
     =========================]
   [===========================================================================
     =========================]
   ANALYZATION AND ONE EXECUTION: 0.0791308879852295
   TOTAL TIME ELAPSED:            111.387278795242
   NET TIME:                      111.308147907257
   AVERAGE ITERATION TIME:        0.111308147907257
   [===========================================================================
     =========================]
   [===========================================================================
     =========================]
   ANALYZATION AND ONE EXECUTION: 0.597779989242554
   TOTAL TIME ELAPSED:            207.862083911896
   NET TIME:                      207.264303922653
   AVERAGE ITERATION TIME:        0.207264303922653
   
   ; UNDEF
   *
}
   
Total Elapsed Time = 204.7966 Seconds
  User+System Time = 40.56506 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.14   0.057  0.071      5   0.0115 0.0141  Reader::BEGIN
 0.18   0.071  0.149     12   0.0059 0.0124  main::BEGIN
 0.04   0.018  1.683      5   0.0035 0.3367  Reader::scheme_read_from_file
 0.01   0.003  0.003      1   0.0034 0.0034  warnings::register_categories
 0.01   0.003  0.003      1   0.0028 0.0028  bytes::import
 0.01   0.003  0.003      2   0.0015 0.0015  DynaLoader::dl_install_xsub
 0.01   0.004  0.004      3   0.0012 0.0012  Exporter::import
 0.00   0.001  0.001      1   0.0011 0.0011  main::Special_forms
 0.00   0.001  0.004      1   0.0007 0.0045  DynaLoader::bootstrap
 0.00   0.001  0.001      1   0.0006 0.0013  XSLoader::load
 0.00   0.002  0.008      4   0.0005 0.0020  Data::Dumper::BEGIN
 0.00   0.001  0.001      2   0.0005 0.0005  DynaLoader::dl_load_file
 0.00   0.000  0.000      1   0.0004 0.0004  vars::import
 0.00   0.000  0.000      1   0.0003 0.0003  Time::HiRes::bootstrap
 0.01   0.006  0.006     18   0.0003 0.0003  main::new_symbol
 0.00   0.000  0.000      1   0.0003 0.0003  feature::import
 0.00   0.000  0.000      1   0.0003 0.0004  Exporter::export
 0.00   0.000  0.000      1   0.0002 0.0002  Data::Dumper::bootstrap
 0.00   0.000  0.000      1   0.0002 0.0002  Exporter::Heavy::_rebuild_cache
 0.96   0.390  1.673   2829   0.0001 0.0006  Reader::scheme_read
 0.00   0.000  0.000      1   0.0001 0.0001  Cons::import
 0.15   0.060  1.302    512   0.0001 0.0025  Reader::scheme_read_delimited_list
 0.00   0.000  0.000      2   0.0001 0.0001  warnings::unimport
 0.54   0.221 20.707   1945   0.0001 0.0106  main::scheme_analyze
 0.00   0.000  0.000      1   0.0001 0.0001  Reader::import
 0.01   0.005 129.45     51   0.0001 2.5383  main::scheme_eval
 0.00   0.001  0.001     10   0.0001 0.0001  Reader::make_scheme_stream
 0.00   0.000  0.000      1   0.0001 0.0001  Symbol::BEGIN
 22.5   9.128 16.688 109274   0.0001 0.0002  Cons::array_to_cons
 0.00   0.000  0.000      1   0.0001 0.0001  Config::import
 36.2   14.70 31.161 206392   0.0001 0.0002  main::bind_vars
 21.7   8.805  8.805 133201   0.0001 0.0001  Cons::cons_to_array
 0.00   0.000  0.000      1   0.0001 0.0001  overload::OVERLOAD
 139.   56.42 129.12 108770   0.0001 0.0001  main::__ANON__
 0.00   0.000  0.000      2   0.0001 0.0001  Exporter::as_heavy
 0.11   0.043  0.043    852   0.0001 0.0001  main::looks_like_number
 0.00   0.000  0.000      3   0.0000 0.0000  warnings::import
 0.00   0.000  0.003      1   0.0000 0.0035  warnings::register::import
 19.0   7.742  7.742 221968   0.0000 0.0000  Cons::cons
 0.67   0.270  0.270   8226   0.0000 0.0000  String::new
 0.00   0.000  0.000      4   0.0000 0.0000  strict::import
 3.39   1.374  1.374  46683   0.0000 0.0000  main::set_var
 0.00   0.000  0.000      9   0.0000 0.0000  main::to_string
 61.1   24.81 24.810 948983   0.0000 0.0000  main::find_var
 0.00   0.000  0.000      2   0.0000 0.0000  warnings::_mkMask
 12.0   4.880  4.880 206392   0.0000 0.0000  main::merge_envs
 0.00   0.000  0.000      3   0.0000 0.0000  strict::bits
 0.29   0.118  0.118   5432   0.0000 0.0000  Cons::cdr
 3.06   1.241  1.677  58861   0.0000 0.0000  Reader::__ANON__
 0.26   0.104  1.989   5052   0.0000 0.0004  Cons::null
 0.38   0.155  0.155   7740   0.0000 0.0000  Cons::car
 0.00   0.000  0.001      1   0.0000 0.0006  Time::HiRes::import
 0.00   0.000  0.000      7   0.0000 0.0000  Config::FETCH
 0.00   0.000  0.000      6   0.0000 0.0000  Time::HiRes::gettimeofday
 0.00   0.000  0.000      2   0.0000 0.0000  DynaLoader::BEGIN
 0.00   0.000  0.003      1   0.0000 0.0035  overload::BEGIN
Total Elapsed Time = 204.7966 Seconds
  User+System Time = 40.56506 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.00   0.000  0.000      1   0.0000 0.0000  DynaLoader::dl_load_flags
 0.00   0.000  0.000      3   0.0000 0.0000  strict::unimport
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export_to_l
                                             evel
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export
 0.00       - -0.000     10        -      -  UNIVERSAL::can
 0.00       -  0.000      3        - 0.0000  Cons::BEGIN
 0.00       - -0.000      2        -      -  DynaLoader::dl_find_symbol
 0.00       -  0.000      3        - 0.0001  Time::HiRes::BEGIN
 0.00       - -0.000      2        -      -  DynaLoader::dl_undef_symbols
 0.00       -  0.000      1        - 0.0005  Exporter::export_to_level
 0.00       -  0.000      1        - 0.0000  overload::import
 0.00       -  0.000      1        - 0.0000  String::BEGIN


Tue Oct 30 16:19:21 MDT 2012

This was for profiling read time. The recorded data is from running
the commands: (load "cert/cert.scm") and (quit)


Total Elapsed Time = 24.01896 Seconds
  User+System Time = 9.183691 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.71   0.065  0.070      5   0.0130 0.0139  Reader::BEGIN
 0.79   0.073  0.146     12   0.0061 0.0122  main::BEGIN
 0.01   0.001  0.001      1   0.0015 0.0015  main::Special_forms
 0.07   0.006  1.910      5   0.0012 0.3820  Reader::scheme_read_from_file
 0.01   0.001  0.001      1   0.0007 0.0015  DynaLoader::bootstrap
 0.01   0.001  0.001      1   0.0007 0.0007  warnings::register_categories
 0.01   0.001  0.001      1   0.0006 0.0013  XSLoader::load
 0.02   0.002  0.002      4   0.0005 0.0006  Data::Dumper::BEGIN
 0.01   0.001  0.001      2   0.0004 0.0004  DynaLoader::dl_load_file
 0.00   0.000  0.000      1   0.0004 0.0004  vars::import
 0.00   0.000  0.000      1   0.0003 0.0003  Time::HiRes::bootstrap
 0.00   0.000  0.000      1   0.0003 0.0003  feature::import
 0.00   0.000  0.000      1   0.0003 0.0004  Exporter::export
 0.01   0.001  0.001      3   0.0002 0.0002  Exporter::import
 1.28   0.118  1.477    587   0.0002 0.0025  Reader::scheme_read_delimited_list
 0.00   0.000  0.000      1   0.0002 0.0002  Data::Dumper::bootstrap
 0.00   0.000  0.000      1   0.0002 0.0002  Exporter::Heavy::_rebuild_cache
 0.00   0.000  0.000      1   0.0002 0.0002  overload::OVERLOAD
 4.89   0.449  1.879   3199   0.0001 0.0006  Reader::scheme_read
 0.00   0.000  0.000      1   0.0001 0.0001  Cons::import
 2.80   0.257 28.506   2277   0.0001 0.0125  main::scheme_analyze
 0.00   0.000  0.000      2   0.0001 0.0001  warnings::unimport
 0.00   0.000  0.000      1   0.0001 0.0001  Reader::import
 0.07   0.006 29.355     59   0.0001 0.4975  main::scheme_eval
 0.01   0.001  0.001      8   0.0001 0.0001  Reader::make_scheme_stream
 0.00   0.000  0.000      1   0.0001 0.0001  Symbol::BEGIN
 39.3   3.611  3.611  43957   0.0001 0.0001  Cons::cons_to_array
 8.55   0.785  1.503  10414   0.0001 0.0001  Cons::array_to_cons
 0.00   0.000  0.000      1   0.0001 0.0001  Config::import
 40.4   3.712  4.892  53563   0.0001 0.0001  main::bind_vars
 0.00   0.000  0.000      4   0.0001 0.0001  String::new
 127.   11.68 29.150 227302   0.0001 0.0001  main::__ANON__
 0.00   0.000  0.000      2   0.0000 0.0000  Exporter::as_heavy
 0.49   0.045  0.045    989   0.0000 0.0000  main::looks_like_number
 10.7   0.985  0.985  25594   0.0000 0.0000  Cons::cons
 0.00   0.000  0.001      1   0.0000 0.0007  warnings::register::import
 0.00   0.000  0.000      3   0.0000 0.0000  warnings::import
 0.00   0.000  0.000      2   0.0000 0.0000  DynaLoader::dl_install_xsub
 62.5   5.747  5.747 215330   0.0000 0.0000  main::find_var
 13.6   1.252  1.252  53563   0.0000 0.0000  main::merge_envs
 0.00   0.000  0.000      3   0.0000 0.0000  strict::bits
 0.00   0.000  0.000      2   0.0000 0.0000  warnings::_mkMask
 1.61   0.148  2.908   7056   0.0000 0.0004  Cons::null
 14.5   1.339  1.876  63940   0.0000 0.0000  Reader::__ANON__
 1.39   0.128  0.128   6156   0.0000 0.0000  Cons::cdr
 0.48   0.044  0.044   2271   0.0000 0.0000  main::set_var
 0.00   0.000  0.000      1   0.0000 0.0002  overload::import
 0.00   0.000  0.000      1   0.0000 0.0002  String::BEGIN
 0.00   0.000  0.000      1   0.0000 0.0000  bytes::import
 1.27   0.117  0.117   8011   0.0000 0.0000  Cons::car
 0.00   0.000  0.000      4   0.0000 0.0000  strict::import
 0.00   0.000  0.000     27   0.0000 0.0000  main::new_symbol
 0.00   0.000  0.000      7   0.0000 0.0000  Config::FETCH
 0.00   0.000  0.001      1   0.0000 0.0005  Time::HiRes::import
 0.00   0.000  0.000      2   0.0000 0.0000  DynaLoader::BEGIN
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export_to_l
Total Elapsed Time = 24.01896 Seconds
  User+System Time = 9.183691 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
                                             evel
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export
 0.00       -  0.000      3        - 0.0000  strict::unimport
 0.00       -  0.001      1        - 0.0007  overload::BEGIN
 0.00       - -0.000      1        -      -  DynaLoader::dl_load_flags
 0.00       - -0.000     10        -      -  UNIVERSAL::can
 0.00       - -0.000      2        -      -  DynaLoader::dl_find_symbol
 0.00       - -0.000      1        -      -  main::to_string
 0.00       - -0.000      2        -      -  DynaLoader::dl_undef_symbols
 0.00       -  0.000      3        - 0.0000  Cons::BEGIN
 0.00       -  0.000      3        - 0.0001  Time::HiRes::BEGIN
 0.00       -  0.000      1        - 0.0005  Exporter::export_to_level


Thu Nov  1 21:40:43 MDT 2012

Attempted to optimize the calls to cons_to_array() in the addition
operators. The following is just: (load "cert/cert.scm")


Total Elapsed Time = 143.2485 Seconds
  User+System Time = 8.134791 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.15   0.012  0.014      1   0.0115 0.0144  String::BEGIN
 0.81   0.066  0.094     13   0.0051 0.0073  main::BEGIN
 0.04   0.003  0.003      1   0.0026 0.0027  warnings::register_categories
 0.02   0.002  0.002      1   0.0021 0.0021  Exporter::Heavy::_rebuild_cache
 0.07   0.006  0.006      3   0.0021 0.0021  warnings::unimport
 0.01   0.001  0.001      1   0.0014 0.0014  main::Special_forms
 0.01   0.001  0.003      1   0.0013 0.0027  DynaLoader::bootstrap
 0.06   0.005  1.859      5   0.0010 0.3719  Reader::scheme_read_from_file
 0.01   0.001  0.001      1   0.0007 0.0007  DynaLoader::dl_load_file
 0.01   0.001  0.001      1   0.0006 0.0006  Time::HiRes::bootstrap
 0.00   0.000  0.000      1   0.0005 0.0005  feature::import
 0.00   0.000  0.002      1   0.0004 0.0025  Exporter::export
 0.00   0.000  0.000      1   0.0003 0.0003  Exporter::import
 0.18   0.015 27.868     59   0.0003 0.4723  main::scheme_eval
 1.60   0.130  1.442    587   0.0002 0.0025  Reader::scheme_read_delimited_list
 0.00   0.000  0.000      1   0.0002 0.0002  Cons::import
 0.00   0.000  0.000      1   0.0002 0.0002  overload::OVERLOAD
 0.00   0.000  0.000      1   0.0002 0.0002  Reader::import
 0.00   0.000  0.000      1   0.0001 0.0001  vars::import
 4.76   0.387  1.845   3199   0.0001 0.0006  Reader::scheme_read
 0.01   0.001  0.001      8   0.0001 0.0001  Reader::make_scheme_stream
 3.06   0.249 27.008   2277   0.0001 0.0119  main::scheme_analyze
 0.00   0.000  0.000      1   0.0001 0.0001  Symbol::BEGIN
 0.00   0.000  0.000      2   0.0001 0.0001  Exporter::as_heavy
 37.5   3.051  3.051  39777   0.0001 0.0001  Cons::cons_to_array
 0.00   0.000  0.000      4   0.0001 0.0001  String::new
 5.31   0.432  0.783   6181   0.0001 0.0001  Cons::array_to_cons
 43.4   3.536  4.079  53563   0.0001 0.0001  main::bind_vars
 0.00   0.000  0.003      1   0.0001 0.0027  warnings::register::import
 0.00   0.000  0.000      1   0.0001 0.0001  DynaLoader::dl_install_xsub
 0.00   0.000  0.003      1   0.0001 0.0029  Time::HiRes::import
 149.   12.15 27.668 227302   0.0001 0.0001  main::__ANON__
 0.57   0.046  0.046    989   0.0000 0.0000  main::looks_like_number
 0.00   0.000  0.000      3   0.0000 0.0000  warnings::import
 0.00   0.000  0.000      1   0.0000 0.0000  main::to_string
 7.71   0.627  0.627  16429   0.0000 0.0000  Cons::cons
 0.00   0.000  0.003      1   0.0000 0.0026  Exporter::export_to_level
 0.00   0.000  0.000      2   0.0000 0.0000  warnings::_mkMask
 0.00   0.000  0.000      1   0.0000 0.0002  overload::import
 0.00   0.000  0.000      7   0.0000 0.0000  Config::FETCH
 65.0   5.295  5.295 215330   0.0000 0.0000  main::find_var
 1.94   0.158  2.758   7062   0.0000 0.0004  Cons::null
 14.5   1.183  1.183  53563   0.0000 0.0000  main::merge_envs
 0.60   0.049  0.049   2271   0.0000 0.0000  main::set_var
 16.5   1.342  1.834  63940   0.0000 0.0000  Reader::__ANON__
 1.52   0.124  0.124   6156   0.0000 0.0000  Cons::cdr
 0.00   0.000  0.000      3   0.0000 0.0000  strict::bits
 0.00   0.000  0.000     27   0.0000 0.0000  main::new_symbol
 0.00   0.000  0.000      4   0.0000 0.0000  strict::import
 1.33   0.108  0.108   8017   0.0000 0.0000  Cons::car
 0.00   0.000  0.000      1   0.0000 0.0000  Config::import
 0.00   0.000  0.000      1   0.0000 0.0000  DynaLoader::dl_load_flags
 0.00   0.000  0.000      1   0.0000 0.0000  DynaLoader::dl_find_symbol
 0.00   0.000  0.003      1   0.0000 0.0027  overload::BEGIN
 0.00   0.000  0.000      1   0.0000 0.0000  DynaLoader::dl_undef_symbols
 0.00   0.000  0.000      4   0.0000 0.0001  Reader::BEGIN
Total Elapsed Time = 143.2485 Seconds
  User+System Time = 8.134791 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.00   0.000  0.000     10   0.0000 0.0000  UNIVERSAL::can
 0.00   0.000  0.000      3   0.0000 0.0000  Cons::BEGIN
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export_to_l
                                             evel
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export
 0.00       -  0.000      3        - 0.0000  strict::unimport
 0.00       - -0.000      2        -      -  DynaLoader::BEGIN
 0.00       - -0.000      3        -      -  Time::HiRes::BEGIN


time trials: 
* (begin (time-trial 1000 (closure-tests))
(time-trial 1000 (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0789949893951416
TOTAL TIME ELAPSED:            111.469299077988
NET TIME:                      111.390304088593
AVERAGE ITERATION TIME:        0.111390304088593
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.193530082702637
TOTAL TIME ELAPSED:            207.623408079147
NET TIME:                      207.429877996445
AVERAGE ITERATION TIME:        0.207429877996445

; UNDEF
*


Total Elapsed Time = 143.8469 Seconds
  User+System Time = 48.81652 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.02   0.011  0.012      1   0.0113 0.0123  String::BEGIN
 0.15   0.072  0.091     13   0.0055 0.0070  main::BEGIN
 0.02   0.012  1.891      5   0.0024 0.3782  Reader::scheme_read_from_file
 0.00   0.002  0.002      1   0.0023 0.0023  DynaLoader::dl_load_flags
 0.00   0.001  0.001      1   0.0014 0.0014  main::Special_forms
 0.00   0.001  0.004      1   0.0009 0.0041  DynaLoader::bootstrap
 0.00   0.001  0.001      1   0.0007 0.0008  warnings::register_categories
 0.00   0.001  0.001      1   0.0005 0.0005  DynaLoader::dl_load_file
 0.00   0.000  0.000      1   0.0005 0.0005  vars::import
 0.00   0.000  0.000      1   0.0004 0.0004  Time::HiRes::bootstrap
 0.00   0.000  0.000      1   0.0003 0.0003  feature::import
 0.00   0.000  0.001      1   0.0003 0.0005  Exporter::export
 0.01   0.003  0.003     10   0.0003 0.0003  Reader::make_scheme_stream
 0.00   0.000  0.000      1   0.0003 0.0003  Exporter::import
 0.00   0.000  0.000      1   0.0002 0.0002  Exporter::Heavy::_rebuild_cache
 0.02   0.011 150.78     60   0.0002 2.5131  main::scheme_eval
 0.00   0.000  0.000      1   0.0002 0.0002  Cons::import
 0.19   0.093  1.499    592   0.0002 0.0025  Reader::scheme_read_delimited_list
 0.00   0.000  0.000      1   0.0001 0.0001  overload::OVERLOAD
 0.98   0.477  1.899   3213   0.0001 0.0006  Reader::scheme_read
 0.00   0.000  0.000      1   0.0001 0.0001  Reader::import
 0.57   0.280 39.316   2538   0.0001 0.0155  main::scheme_analyze
 0.00   0.000  0.000      1   0.0001 0.0001  Symbol::BEGIN
 0.00   0.000  0.000      3   0.0001 0.0001  warnings::unimport
 0.00   0.000  0.000      1   0.0001 0.0001  Config::import
 18.0   8.815 16.685 109828   0.0001 0.0002  Cons::array_to_cons
 35.6   17.39 33.807 244702   0.0001 0.0001  main::bind_vars
 21.7   10.62 10.625 156217   0.0001 0.0001  Cons::cons_to_array
 0.00   0.000  0.000      2   0.0001 0.0001  Exporter::as_heavy
 0.00   0.000  0.001      1   0.0001 0.0008  warnings::register::import
 136.   66.43 150.46 124908   0.0001 0.0001  main::__ANON__
 0.12   0.059  0.059   1105   0.0001 0.0001  main::looks_like_number
 0.00   0.000  0.000      3   0.0000 0.0000  warnings::import
 16.7   8.189  8.189 225175   0.0000 0.0000  Cons::cons
 0.59   0.290  0.290   8226   0.0000 0.0000  String::new
 0.00   0.000  0.000      1   0.0000 0.0000  DynaLoader::dl_install_xsub
 3.10   1.513  1.513  48338   0.0000 0.0000  main::set_var
 0.00   0.000  0.000      1   0.0000 0.0002  overload::import
 0.00   0.000  0.000      2   0.0000 0.0000  warnings::_mkMask
 60.9   29.75 29.754 110408   0.0000 0.0000  main::find_var
 0.00   0.000  0.000      3   0.0000 0.0000  strict::bits
 12.1   5.942  5.942 244702   0.0000 0.0000  main::merge_envs
 0.00   0.000  0.000      4   0.0000 0.0000  strict::import
 0.47   0.228  3.924  10312   0.0000 0.0004  Cons::null
 0.00   0.000  0.000      9   0.0000 0.0000  main::to_string
 2.72   1.329  1.866  64263   0.0000 0.0000  Reader::__ANON__
 0.39   0.192  0.192   9989   0.0000 0.0000  Cons::cdr
 0.00   0.000  0.001      1   0.0000 0.0007  Time::HiRes::import
 0.44   0.216  0.216  13727   0.0000 0.0000  Cons::car
 0.00   0.001  0.001     39   0.0000 0.0000  main::new_symbol
 0.00   0.000  0.000      7   0.0000 0.0000  Config::FETCH
 0.00   0.000  0.001      1   0.0000 0.0006  Exporter::export_to_level
 0.00   0.000  0.000      2   0.0000 0.0001  DynaLoader::BEGIN
 0.00   0.000  0.000      3   0.0000 0.0000  strict::unimport
 0.00   0.000  0.001      1   0.0000 0.0009  overload::BEGIN
 0.00   0.000  0.000      1   0.0000 0.0000  DynaLoader::dl_find_symbol
Total Elapsed Time = 143.8469 Seconds
  User+System Time = 48.81652 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export_to_l
                                             evel
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export
 0.00       -  0.000      4        - 0.0000  Reader::BEGIN
 0.00       - -0.000     10        -      -  UNIVERSAL::can
 0.00       -  0.000      3        - 0.0000  Cons::BEGIN
 0.00       -  0.000      3        - 0.0002  Time::HiRes::BEGIN
 0.00       - -0.000      1        -      -  DynaLoader::dl_undef_symbols
 0.00       - -0.000      6        -      -  Time::HiRes::gettimeofday

Fri Nov  2 12:57:48 MDT 2012

I had cons cells memoize the array they were formed from. This is a
memory pig, and execution times seem to have increased. Removing
optimizations...

WITHOUT PROFILING {
* (begin (time-trial 1000 (closure-tests)) (time-trial 1000
						       (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0271260738372803
TOTAL TIME ELAPSED:            28.8330540657043
NET TIME:                      28.8059279918671
AVERAGE ITERATION TIME:        0.0288059279918671
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0572130680084229
TOTAL TIME ELAPSED:            56.9986040592194
NET TIME:                      56.9413909912109
AVERAGE ITERATION TIME:        0.0569413909912109

; UNDEF
*
}
WITHOUT PROFILING AND OPTIMIZATION {

* (begin (time-trial 1000 (closure-tests)) (time-trial 1000 (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0269489288330078
TOTAL TIME ELAPSED:            28.6282298564911
NET TIME:                      28.6012809276581
AVERAGE ITERATION TIME:        0.0286012809276581
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: -0.473623991012573
TOTAL TIME ELAPSED:            54.6651799678802
NET TIME:                      55.1388039588928
AVERAGE ITERATION TIME:        0.0551388039588928

; UNDEF
* (begin (time-trial 1000 (closure-tests)) (time-trial 1000 (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0266819000244141
TOTAL TIME ELAPSED:            28.904314994812
NET TIME:                      28.8776330947876
AVERAGE ITERATION TIME:        0.0288776330947876
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.053325891494751
TOTAL TIME ELAPSED:            55.1520528793335
NET TIME:                      55.0987269878387
AVERAGE ITERATION TIME:        0.0550987269878387

; UNDEF
*

}

Looks like those optimizations were bad. Killing them...

Fri Nov  9 19:19:08 MST 2012

Finished variable lookups. Results:

* (begin (time-trial 1000 (closure-tests)) (time-trial 1000
  (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0277359485626221
TOTAL TIME ELAPSED:            27.9183120727539
NET TIME:                      27.8905761241913
AVERAGE ITERATION TIME:        0.0278905761241913
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0508639812469482
TOTAL TIME ELAPSED:            52.775976896286
NET TIME:                      52.7251129150391
AVERAGE ITERATION TIME:        0.0527251129150391

; UNDEF
*

I dropped two seconds on the loop-tests code!

I think one thing that is slowing stuff down is the execution of the
code that is generated by backquote. This is kind of
expensive. Optimizations there could help.

After I commit, I am going to do some profiling. Results from the
profile:

WITH PROFILING {

* (begin (time-trial 1000 (closure-tests)) (time-trial 1000
  (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.695981979370117
TOTAL TIME ELAPSED:            95.4316730499268
NET TIME:                      94.7356910705566
AVERAGE ITERATION TIME:        0.0947356910705566
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.17588210105896
TOTAL TIME ELAPSED:            176.568382024765
NET TIME:                      176.392499923706
AVERAGE ITERATION TIME:        0.176392499923706

; UNDEF
*

}

...

Wow. That was big. Results:

(defun percent (old new)
  (/ (- old new) old)) 		#/ # 

(percent 111.390304088593 94.7356910705566) ; 0.14951582325145954
(percent 207.429877996445 176.392499923706) ; 0.14962829064225222
(- 111.390304088593 94.7356910705566) # 16.6546130180364
(- 207.429877996445 176.392499923706) # 31.03737807273899


Total Elapsed Time = 91.83152 Seconds
  User+System Time = 63.29786 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.20   0.127  0.146     14   0.0091 0.0105  main::BEGIN
 0.01   0.005  0.006      1   0.0053 0.0056  XSLoader::load
 0.00   0.002  0.002      1   0.0017 0.0017  main::Special_forms
 0.00   0.001  0.003      1   0.0013 0.0026  DynaLoader::bootstrap
 0.00   0.001  0.001      1   0.0006 0.0007  warnings::register_categories
 0.00   0.001  0.001      1   0.0006 0.0006  Time::HiRes::bootstrap
 0.00   0.002  0.002      4   0.0005 0.0005  Data::Dumper::BEGIN
 0.00   0.001  0.001      2   0.0005 0.0005  DynaLoader::dl_load_file
 0.00   0.000  0.000      1   0.0004 0.0004  feature::import
 0.00   0.000  0.000      1   0.0004 0.0004  vars::import
 0.00   0.000  0.000      1   0.0003 0.0004  Cons::import
 0.23   0.145  1.577    637   0.0002 0.0025  Reader::scheme_read_delimited_list
 0.02   0.011 143.54     63   0.0002 2.2784  main::scheme_eval
 0.00   0.000  0.000      3   0.0002 0.0002  Exporter::import
 0.78   0.492  1.641   3287   0.0001 0.0005  Reader::scheme_read
 0.00   0.000  0.000      1   0.0001 0.0002  Exporter::export
 0.47   0.297 38.800   2681   0.0001 0.0145  main::scheme_analyze
 0.03   0.020  0.020    188   0.0001 0.0001  main::make_iso_hash
 0.00   0.000  0.000      1   0.0001 0.0001  Reader::import
 0.00   0.000  0.000      1   0.0001 0.0001  Exporter::Heavy::_rebuild_cache
 0.00   0.000  0.000      1   0.0001 0.0001  Data::Dumper::bootstrap
 0.00   0.001  0.001     10   0.0001 0.0001  Reader::make_scheme_stream
 0.14   0.090  0.090   1075   0.0001 0.0001  main::compile_var_lookup
 14.2   8.989 17.255 110272   0.0001 0.0002  Cons::array_to_cons
 0.00   0.000  0.000      3   0.0001 0.0001  warnings::unimport
 28.3   17.91 34.859 248127   0.0001 0.0001  main::bind_vars
 10.3   6.562  6.562  91477   0.0001 0.0001  Cons::cons_to_array
 7.63   4.832  6.362  67382   0.0001 0.0001  Cons::mapcar
 0.00   0.000  0.000      1   0.0001 0.0001  overload::OVERLOAD
 0.00   0.000  0.000      2   0.0001 0.0001  Exporter::as_heavy
 129.   82.16 143.09 137525   0.0001 0.0001  main::__ANON__
 0.11   0.067  0.067   1165   0.0001 0.0001  main::looks_like_number
 0.00   0.002  0.002     41   0.0001 0.0001  main::new_symbol
 0.00   0.000  0.000      3   0.0000 0.0000  warnings::import
 0.00   0.000  0.005      1   0.0000 0.0053  Time::HiRes::import
 0.00   0.000  0.000      1   0.0000 0.0000  Symbol::BEGIN
 0.00   0.000  0.001      1   0.0000 0.0007  warnings::register::import
 13.6   8.620  8.620 226309   0.0000 0.0000  Cons::cons
 0.00   0.002  0.015     63   0.0000 0.0002  main::make_iso_env
 0.00   0.000  0.000      1   0.0000 0.0000  Config::import
 0.43   0.275  0.275   8226   0.0000 0.0000  String::new
 0.00   0.000  0.000      3   0.0000 0.0000  strict::bits
 0.00   0.000  0.000      2   0.0000 0.0000  DynaLoader::dl_install_xsub
 0.00   0.000  0.000      2   0.0000 0.0000  warnings::_mkMask
 2.18   1.379  1.379  48476   0.0000 0.0000  main::set_var
 0.00   0.000  0.000      7   0.0000 0.0000  Config::FETCH
 9.42   5.961  5.961 248127   0.0000 0.0000  main::merge_envs
 0.38   0.243  3.998  10740   0.0000 0.0004  Cons::null
 7.61   4.815  4.815 216972   0.0000 0.0000  main::find_var
 0.33   0.206  0.206  10360   0.0000 0.0000  Cons::cdr
 1.59   1.009  1.641  51641   0.0000 0.0000  Reader::__ANON__
 0.43   0.274  0.274  14211   0.0000 0.0000  Cons::car
 0.00   0.000  0.000      4   0.0000 0.0000  strict::import
 0.00   0.002  0.010    125   0.0000 0.0001  main::merge_iso_envs
 0.00   0.000  0.000      9   0.0000 0.0000  main::to_string
 0.00   0.000  0.000      1   0.0000 0.0000  bytes::import
Total Elapsed Time = 91.83152 Seconds
  User+System Time = 63.29786 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.00   0.000  0.000      3   0.0000 0.0000  strict::unimport
 0.00   0.000  0.000      1   0.0000 0.0000  DynaLoader::dl_load_flags
 0.00   0.000  0.000      4   0.0000 0.0001  Reader::BEGIN
 0.00   0.000  0.000     10   0.0000 0.0000  UNIVERSAL::can
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export_to_l
                                             evel
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export
 0.00       - -0.000      2        -      -  DynaLoader::dl_find_symbol
 0.00       -  0.001      1        - 0.0007  overload::BEGIN
 0.00       -  0.000      3        - 0.0000  Cons::BEGIN
 0.00       - -0.000      6        -      -  Time::HiRes::gettimeofday
 0.00       - -0.000      2        -      -  DynaLoader::dl_undef_symbols
 0.00       -  0.000      3        - 0.0001  Time::HiRes::BEGIN
 0.00       -  0.000      2        - 0.0000  DynaLoader::BEGIN
 0.00       -  0.000      1        - 0.0001  overload::import
 0.00       -  0.000      1        - 0.0000  String::BEGIN
 0.00       -  0.000      1        - 0.0002  Exporter::export_to_level
    -       -  1.629      5        - 0.3258  Reader::scheme_read_from_file

Sat Nov 17 16:52:20 MST 2012

Implemented lexical addressing for variable assignments. Results
without profiling:

* (begin (time-trial 1000 (closure-tests)) (time-trial 1000
  (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0264339447021484
TOTAL TIME ELAPSED:            27.3786449432373
NET TIME:                      27.3522109985352
AVERAGE ITERATION TIME:        0.0273522109985352
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0544180870056152
TOTAL TIME ELAPSED:            53.3718671798706
NET TIME:                      53.317449092865
AVERAGE ITERATION TIME:        0.053317449092865

; UNDEF
*

Hhmmm... Not too encouraging. Trying again...

* (begin (time-trial 1000 (closure-tests)) (time-trial 1000
  (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0265870094299316
TOTAL TIME ELAPSED:            27.7317709922791
NET TIME:                      27.7051839828491
AVERAGE ITERATION TIME:        0.0277051839828491
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0537939071655273
TOTAL TIME ELAPSED:            54.5830588340759
NET TIME:                      54.5292649269104
AVERAGE ITERATION TIME:        0.0545292649269104

; UNDEF
*

Not exactly encouraging... I got 26 seconds with the closures the
first time I ran the tests. Oh well. Removing "optimizations".

Sat Nov 17 22:42:05 MST 2012

I've written a backquote simplifier. Macro expansion (I imagine) takes
a touch longer (well, the read-macro expansion) but I think the
evaluation time takes just a hair shorter. Running the profiler...

* (begin (time-trial 1000 (closure-tests)) (time-trial 1000
  (loop-tests)))
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.0717229843139648
TOTAL TIME ELAPSED:            95.6180768013
NET TIME:                      95.5463538169861
AVERAGE ITERATION TIME:        0.0955463538169861
[====================================================================================================]
[====================================================================================================]
ANALYZATION AND ONE EXECUTION: 0.882282018661499
TOTAL TIME ELAPSED:            178.437327861786
NET TIME:                      177.555045843124
AVERAGE ITERATION TIME:        0.177555045843124

; UNDEF
*

Hhmmm... /very/ slight perfomance penalty. I might still be able to
make some more optimizations with this. Output of the profiler:

Total Elapsed Time = 111.1945 Seconds
  User+System Time = 68.22290 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.19   0.131  0.151     14   0.0093 0.0108  main::BEGIN
 0.01   0.006  0.006      1   0.0057 0.0057  main::Special_forms
 0.00   0.003  0.003      1   0.0031 0.0033  Exporter::export
 0.01   0.006  0.006      2   0.0029 0.0029  DynaLoader::dl_load_file
 0.01   0.005  0.005      4   0.0012 0.0013  Data::Dumper::BEGIN
 0.00   0.001  0.001      1   0.0011 0.0012  warnings::register_categories
 0.00   0.001  0.006      1   0.0009 0.0063  XSLoader::load
 0.00   0.001  0.002      1   0.0008 0.0016  DynaLoader::bootstrap
 0.00   0.001  0.001      1   0.0005 0.0005  feature::import
 0.00   0.000  0.000      1   0.0004 0.0004  vars::import
 0.00   0.000  0.000      1   0.0003 0.0003  Time::HiRes::bootstrap
 0.00   0.002  1.812      5   0.0003 0.3624  Reader::scheme_read_from_file
 0.00   0.000  0.000      1   0.0003 0.0004  Cons::import
 0.00   0.003  0.003     10   0.0003 0.0003  Reader::make_scheme_stream
 0.24   0.164  1.729    695   0.0002 0.0025  Reader::scheme_read_delimited_list
 0.00   0.001  0.001      3   0.0002 0.0002  Exporter::import
 0.02   0.012 147.44     64   0.0002 2.3038  main::scheme_eval
 0.00   0.000  0.000      1   0.0002 0.0002  Exporter::Heavy::_rebuild_cache
 0.04   0.028  0.028    194   0.0001 0.0001  main::make_iso_hash
 0.70   0.480  1.813   3643   0.0001 0.0005  Reader::scheme_read
 0.43   0.292 38.823   2774   0.0001 0.0140  main::scheme_analyze
 0.00   0.000  0.000      1   0.0001 0.0001  Data::Dumper::bootstrap
 0.00   0.000  0.001      1   0.0001 0.0012  warnings::register::import
 13.9   9.523 17.836 110083   0.0001 0.0002  Cons::array_to_cons
 0.00   0.000  0.000      3   0.0001 0.0001  warnings::unimport
 0.00   0.000  0.000      1   0.0001 0.0001  Config::import
 0.00   0.000  0.000      1   0.0001 0.0001  overload::OVERLOAD
 11.2   7.669  7.669 101320   0.0001 0.0001  Cons::cons_to_array
 26.8   18.33 35.839 244642   0.0001 0.0001  main::bind_vars
 7.08   4.832  6.162  67394   0.0001 0.0001  Cons::mapcar
 0.11   0.078  0.078   1113   0.0001 0.0001  main::compile_var_lookup
 123.   84.49 146.97 136091   0.0001 0.0001  main::__ANON__
 0.10   0.071  0.071   1204   0.0001 0.0001  main::looks_like_number
 0.00   0.000  0.000      3   0.0001 0.0001  warnings::import
 0.01   0.007  0.014    130   0.0001 0.0001  main::merge_iso_envs
 0.00   0.000  0.000      2   0.0001 0.0001  Exporter::as_heavy
 0.00   0.000  0.000      2   0.0000 0.0000  warnings::_mkMask
 0.00   0.000  0.000      3   0.0000 0.0000  strict::bits
 12.6   8.658  8.658 225755   0.0000 0.0000  Cons::cons
 0.00   0.000  0.000      1   0.0000 0.0000  Symbol::BEGIN
 0.00   0.002  0.023     64   0.0000 0.0004  main::make_iso_env
 0.39   0.265  0.265   8226   0.0000 0.0000  String::new
 2.09   1.427  1.427  48318   0.0000 0.0000  main::set_var
 0.00   0.000  0.001      1   0.0000 0.0013  overload::BEGIN
 0.00   0.000  0.000      4   0.0000 0.0000  strict::import
 8.37   5.709  5.709 244642   0.0000 0.0000  main::merge_envs
 0.00   0.000  0.000      2   0.0000 0.0000  DynaLoader::dl_install_xsub
 0.00   0.000  0.000      9   0.0000 0.0000  main::to_string
 0.34   0.231  5.000  10218   0.0000 0.0005  Cons::null
 7.04   4.803  4.803 213837   0.0000 0.0000  main::find_var
 1.73   1.179  1.798  56024   0.0000 0.0000  Reader::__ANON__
 0.28   0.193  0.193   9926   0.0000 0.0000  Cons::cdr
 0.00   0.000  0.000      3   0.0000 0.0001  Cons::BEGIN
 0.00   0.000  0.000      3   0.0000 0.0001  strict::unimport
 0.00   0.001  0.001     41   0.0000 0.0000  main::new_symbol
 0.00   0.000  0.000      1   0.0000 0.0000  bytes::import
Total Elapsed Time = 111.1945 Seconds
  User+System Time = 68.22290 Seconds
Exclusive Times
%Time ExclSec CumulS #Calls sec/call Csec/c  Name
 0.00   0.000  0.003      1   0.0000 0.0034  Time::HiRes::import
 0.00   0.000  0.000      4   0.0000 0.0001  Reader::BEGIN
 0.00   0.000  0.000      2   0.0000 0.0000  DynaLoader::BEGIN
 0.00   0.000  0.000      7   0.0000 0.0000  Config::FETCH
 0.00   0.000  0.000     10   0.0000 0.0000  UNIVERSAL::can
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export_to_l
                                             evel
 0.00   0.000  0.000      1   0.0000 0.0000  Exporter::Heavy::heavy_export
 0.00       - -0.000      1        -      -  DynaLoader::dl_load_flags
 0.00       -  0.003      1        - 0.0033  Exporter::export_to_level
 0.00       - -0.000      6        -      -  Time::HiRes::gettimeofday
 0.00       - -0.000      1        -      -  Reader::import
 0.00       - -0.000      2        -      -  DynaLoader::dl_find_symbol
 0.00       -  0.000      3        - 0.0001  Time::HiRes::BEGIN
 0.00       - -0.000      2        -      -  DynaLoader::dl_undef_symbols
 0.00       -  0.000      1        - 0.0000  String::BEGIN
 0.00       -  0.000      1        - 0.0001  overload::import
